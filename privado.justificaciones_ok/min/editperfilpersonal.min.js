function cambios_validar(a){$.ajax({data:{p:a},async:!1,type:"POST",url:url_cambio}).done(function(a,b,c){var d=a.lista;$.each(d,function(a,b){b.resp?$("#formPersonalMod").submit():swal("Error","Clave incorrecta.","error")})}).fail(function(a,b,c){swal("Error al realizar la peticion dame".textError)})}function cargar_datos_personal(){$.ajax({data:{},async:!1,type:"POST",url:url_data}).done(function(a,b,c){var d=a.lista;$.each(d,function(a,b){$("label").addClass("active"),pk_personal=b.id,foto_antigua=b.foto,$("#mod_nombre").val(b.nombre),$("#mod_apellido").val(b.apellido),$("#mod_correo").val(b.correo),$("#img_personal_mod").attr("src",b.foto)})}).fail(function(a,b,c){})}function readURL(a){if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){$("#img_personal_mod").attr("src",a.target.result)},b.readAsDataURL(a.files[0])}}var url_data="/privado/php/personal/perfilpersonal.php",url_cambio="/privado/php/personal/cambiosvalidar.php",url_personal="/privado/php/personal/editarperfil.php",pk_personal,foto_antigua;$(document).ready(function(){cargar_datos_personal()}),$(document).ready(function(){$("#formPersonalMod").on("submit",function(a){a.preventDefault();var b=new FormData(this);b.append("id",pk_personal),b.append("nombre",$("#mod_nombre").val()),b.append("apellido",$("#mod_apellido").val()),b.append("correo",$("#mod_correo").val()),b.append("clave",$("#mod_clave").val()),b.append("claveR",$("#mod_claveR").val()),b.append("url_foto",foto_antigua),$.ajaxSetup({async:!1}),$.ajax({url:url_personal,type:"POST",data:b,contentType:!1,processData:!1,success:function(a){switch(a){case"Personal modificado.":location.reload();break;default:Materialize.toast(a,3e3,"rounded")}}})})}),$("#modificar_personal").click(function(a){swal({title:"CLAVE ACTUAL",text:"Ingrese su clave actual para efectuar los cambios.",type:"input",inputType:"password",showCancelButton:!0,closeOnConfirm:!0,animation:"slide-from-top",inputPlaceholder:"Clave actual"},function(a){return a!==!1&&(""===a?(swal.showInputError("Por favor, ingrese la clave actual."),!1):void cambios_validar(a))})}),$("#cancelar_mod").click(function(a){window.location.href="/privado/views/dashboard.php"}),$("#fotoPersonalMod").change(function(){readURL(this)});