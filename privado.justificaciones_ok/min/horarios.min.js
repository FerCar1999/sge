function cargar_grupos(){$.ajax({data:{id:pk_tipo_asignatura},type:"POST",url:url_cargar_grupos}).done(function(a,b,c){var d=a.lista;$("#select_grupos").html(""),$.each(d,function(a,b){tipo=b.tipo,$("#select_grupos").append($("<option>",{value:b.id,text:b.nombre,grupo:b.tipo})),$("select").material_select()})}).fail(function(a,b,c){})}function cargar_secciones(){$.ajax({data:{id:pk_grado},type:"POST",url:url_cargar_secciones}).done(function(a,b,c){var d=a.lista;$("#select_secciones").html(""),$.each(d,function(a,b){nivel=b.nivel,"Tercer Ciclo"==b.nivel?$("#select_grupos").prop("disabled","disabled"):"Bachillerato"==b.nivel&&$("#select_grupos").removeAttr("disabled"),$("#select_secciones").append($("<option>",{value:b.id,text:b.nombre})),$("select").material_select()})}).fail(function(a,b,c){})}function cargar_asignaturas(){$.ajax({data:{id:pk_grado,id_tipo_asignatura:pk_tipo_asignatura},type:"POST",url:url_cargar_asignaturas}).done(function(a,b,c){var d=a.lista;$("#select_asignaturas").html(""),$.each(d,function(a,b){$("#select_asignaturas").append($("<option>",{value:b.id,text:b.nombre})),$("select").material_select()})}).fail(function(a,b,c){})}function forever(){"Academico"==tipo?$("#select_especialidad").prop("disabled","disabled"):$("#select_especialidad").removeAttr("disabled")}function tab_dias(a){tab_dia=a}function detalles(a,b,c,d){$(".modal").modal(),$("#modal1").modal("open"),$.ajax({data:{id:b,dia:c},type:"POST",url:url_get_modules}).done(function(a,b,c){var d=a.lista;$(".table_modulos").html(""),$.each(d,function(a,b){$("<tr><td>"+b.materia+"</td><td>"+b.inicio+"</td><td>"+b.final+'</td><td><a onclick="remove_clase2('+b.id+',$(this))" class="btn-floating teal"><i class="material-icons">clear</i></a></td></tr>').appendTo($(".table_modulos"))})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function remove_clase2(a,b){b.closest("tr").remove(),$.post(url_quitar_clase,{id:a},function(a){})}function remove_clase(a,b){swal({title:"Estas Seguro?",text:"La clase se eliminará?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"SI",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(c){c&&$.post(url_quitar_clase,{id:a},function(a){"Exito"!=a?Materialize.toast(a,3e3):b.closest("tr").remove()})})}var url_cargar_grupos="/privado/php/horarios/listar_grupos.php",url_cargar_asignaturas="/privado/php/horarios/cargar_asignaturas.php",url_guardar_clase="/privado/php/horarios/agregar_clase.php",url_quitar_clase="/privado/php/horarios/quitar_clase.php",url_cargar_secciones="/privado/php/horarios/cargar_secciones.php",url_get_modules="/privado/php/horarios/listar_modulos.php",tipo="academico",nivel="",grupo="",modulo="NO",grupo_tecnico_completo="NO",tab_dia="Lunes",pk_grado=0,pk_tipo_asignatura=0;$(document).ready(function(){$(".datepicker").pickadate({monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],today:"Hoy",clear:"Limpiar",close:"Cerrar",labelMonthNext:"Adelante",labelMonthPrev:"Atras",labelMonthSelect:"Selecciona un mes",labelYearSelect:"Selecciona un año",format:"dd !de mmmm !de yyyy",formatSubmit:"yyyy/mm/dd",selectMonths:!0,selectYears:100,closeOnSelect:!0}),$("ul.tabs").tabs(),$("select").material_select(),pk_grado=$("#select_grado").val(),pk_tipo_asignatura=$("#select_tipo_asignatura").val(),cargar_grupos(),cargar_secciones(),cargar_asignaturas()}),$("#select_grado").change(function(){pk_grado=$("#select_grado").val(),cargar_secciones(),cargar_asignaturas(),Materialize.toast("Seleccione la especialidad.",3e3,"rounded")}),$("#select_tipo_asignatura").change(function(){pk_tipo_asignatura=$("#select_tipo_asignatura").val(),cargar_grupos(),cargar_asignaturas(),"Técnica"!=$("#select_tipo_asignatura option:selected").text()?(Materialize.toast("Ignore el campo especialidad.",3e3,"rounded"),$("#select_especialidad").prop("disabled","disabled")):$("#select_especialidad").removeAttr("disabled")}),$("#check_modulo").change(function(){$(this).is(":checked")?(swal("Alerta","Indique la duración en la que se impartira el modulo."),modulo="SI",$(this).attr("checked",!0)):modulo="NO",$("#check_modulo").val($(this).is(":checked"))}),$("#grupo_completo").change(function(){$(this).is(":checked")?(grupo_tecnico_completo="SI",$(this).attr("checked",!0),Materialize.toast("Se ha activado el grupo técnico, ignore el campo sección.",3e3,"rounded")):grupo_tecnico_completo="NO",$("#grupo_completo").val($(this).is(":checked"))}),$("#agregar_clase").click(function(a){$.post(url_guardar_clase,{id_local:$("#select_local").val(),id_grupo:$("#select_grupos").val(),tipo:tipo,id_seccion:$("#select_secciones").val(),id_grado:$("#select_grado").val(),id_asignatura:$("#select_asignaturas").val(),id_tiempo:$("#select_hora").val(),id_especialidad:$("#select_especialidad").val(),inicio:$("#date_inicio").pickadate("picker").get("select","yyyy/mm/dd"),fin:$("#date_fin").pickadate("picker").get("select","yyyy/mm/dd"),dia:tab_dia,modulo:modulo,grupo_tecnico_completo:grupo_tecnico_completo},function(a){"true"!=a?Materialize.toast(a,5e3,"",function(){location.reload()}):location.reload()})});