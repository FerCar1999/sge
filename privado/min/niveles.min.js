function get_data_callback_nivel(){$.ajax({data:{limit:itemsPorPagina,offset:desde,busqueda:$.trim($("input#buscar_nivel").val()),estado:ver_estado_nivel},type:"POST",url:url_listar_niveles}).done(function(a,b,c){var d=a.lista;$(".table").html(""),0==pagina&&creaPaginador(a.cantidad),$.each(d,function(a,b){"Activo"==ver_estado_nivel?$('<tr id="+elem.id+"><td>'+b.nombre+'</td><td><a onclick="ver_nivel('+b.id+",'"+b.nombre+"','"+b.descripcion+"',"+b.cantidad+')" class="btn-floating green" ><i  class="material-icons">edit</i></a> <a onclick="eliminarNivel('+b.id+",'"+b.nombre+'\')" class="btn-floating teal"><i class="material-icons">delete</i></a></td></tr>').appendTo($(".table")):$('<tr id="+elem.id+"><td>'+b.nombre+'</td><td><a onclick="activar_nivel('+b.id+",'"+b.nombre+'\')" class="btn-floating green" ><i  class="material-icons">autorenew</i></a></td></tr>').appendTo($(".table"))})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function ver_nivel(a,b,c,d){pk_nivel=a,$("#formAgregarNivel").hide(),$("#formModNivel").show(),$("label").addClass("active"),$("#mod_nombre").val(b),$("#mod_descripcion").val(c),$("#mod_cantNivel").val(d)}function eliminarNivel(a,b){pk_nivel=a,$("#formAgregarNivel").hide(),$("#formModNivel").hide(),$("#formElimNivel").show(),$("#confirmacion").text("¿Desea desactivar el nivel "+b+"?"),estado_nivel="Inactivo",limpiarCampos()}function activar_nivel(a,b){pk_nivel=a,estado_nivel="Activo",$("#formActNivel").show(),$("#formElimNivel").hide(),$("#formModNivel").hide(),$("#formAgregarNivel").hide(),$("#confirmacion_activar").text("¿Desea activar el nivel "+b+"?")}function nivel_init(){cargaPagina(0),$("#formAgregarNivel").show(),$("#formModNivel").hide(),$("#formElimNivel").hide(),$("#formActNivel").hide()}function limpiarCampos(){$("#nombre").val(""),$("#mod_nombre").val(""),$("#descripcion").val(""),$("#mod_descripcion").val(""),$("#cantNivel").val(""),$("#mod_cantNivel").val(""),$("label").removeClass("active")}var url_listar_niveles="/privado/php/niveles/nivelesListar.php",url_niveles="/privado/php/niveles/niveles.php",url_eliminar_nivel="/privado/php/niveles/eliminarNiveles.php",pk_nivel,estado_nivel="Inactivo",ver_estado_nivel="Activo";$(document).ready(function(){paginador=$(".pagination");var a=2,b=3;init_paginator(paginador,a,b),set_callback(get_data_callback_nivel),nivel_init()}),$("#ver_especialidades_activas").click(function(a){"Activo"!=ver_estado_nivel&&(ver_estado_nivel="Activo",set_callback(get_data_callback_nivel),nivel_init())}),$("#ver_especialidades_inactivas").click(function(a){"Inactivo"!=ver_estado_nivel&&(ver_estado_nivel="Inactivo",set_callback(get_data_callback_nivel),nivel_init())}),$("#buscar_nivel").keyup(function(){nivel_init()}),$("#agregar_nivel").click(function(a){$.post(url_niveles,{nombre:$("#nombre").val(),cantidad:$("#cantNivel").val(),descripcion:$("#descripcion").val(),token:$("#dpToken").val()},function(a){switch(a){case"agregado":swal("Éxito","Nivel agregado.","success"),nivel_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"error");break;default:swal("Error",a,"error")}})}),$("#modificar_nivel").click(function(a){$.post(url_niveles,{id:pk_nivel,nombre:$("#mod_nombre").val(),cantidad:$("#mod_cantNivel").val(),descripcion:$("#mod_descripcion").val(),token:$("#dpToken").val()},function(a){switch(a){case"modificado":swal("Éxito","Nivel modificado.","success"),nivel_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"info");break;case"existente":swal("Error","Nivel existente.","error");break;default:swal("Error",a,"error")}})}),$("#eliminar_nivel").click(function(a){$.post(url_eliminar_nivel,{id:pk_nivel,estado:estado_nivel,token:$("#dpToken").val()},function(a){nivel_init(),swal(a)})}),$("#activar_nivel").click(function(a){$.post(url_eliminar_nivel,{id:pk_nivel,estado:estado_nivel,token:$("#dpToken").val()},function(a){nivel_init(),swal(a)})}),$("#cancelar_mod").click(function(a){limpiarCampos(),$("#formAgregarNivel").show(),$("#formModNivel").hide(),$("#formElimNivel").hide()}),$("#cancelar_eliminar").click(function(a){limpiarCampos(),$("#formAgregarNivel").show(),$("#formModNivel").hide(),$("#formElimNivel").hide()}),$("#cancelar_activar").click(function(a){limpiarCampos(),$("#formAgregarNivel").show(),$("#formModNivel").hide(),$("#formElimNivel").hide()});