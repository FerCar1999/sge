function get_data_callback_locales(){$.ajax({data:{limit:itemsPorPagina,busqueda:$.trim($("input#buscar_local").val()),offset:desde,estado:ver_estado_local},type:"POST",url:url_listar_locales}).done(function(a,b,c){var d=a.lista;$(".table").html(""),0==pagina&&creaPaginador(a.cantidad),$.each(d,function(a,b){"Activo"==ver_estado_local?$('<tr id="+elem.id+"><td>'+b.nombre+"</td><td>"+b.capacidad+'</td><td><a onclick="ver_local('+b.id+",'"+b.nombre+"','"+b.capacidad+"',"+b.idTipoLocal+')" class="btn-floating green" ><i  class="material-icons">edit</i></a> <a onclick="eliminar_local('+b.id+",'"+b.nombre+'\')" class="btn-floating green"><i class="material-icons">delete</i></a></td></tr>').appendTo($(".table")):$('<tr id="+elem.id+"><td>'+b.nombre+"</td><td>"+b.capacidad+'</td><td><a onclick="activar_local('+b.id+",'"+b.nombre+'\')" class="btn-floating green" ><i  class="material-icons">autorenew</i></a></td></tr>').appendTo($(".table"))})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function ver_local(a,b,c,d){pk_local=a,$("#formAgregarLocal").hide(),$("#formModLocal").show(),$("#formElimLocal").hide(),$("#formActLocal").hide(),$("label").addClass("active"),$("#mod_nombre").val(b),$("#mod_capacidad").val(c),$("#selectTipoLocalMod").find('option[value="'+d+'"]').prop("selected",!0),$("#selectTipoLocalMod").material_select()}function eliminar_local(a,b){pk_local=a,$("#formElimLocal").show(),$("#formActLocal").hide(),$("#formModLocal").hide(),$("#formAgregarLocal").hide(),$("#confirmacion").text("¿Desea desactivar el local "+b+" ?"),estado_local="Inactivo"}function activar_local(a,b){pk_local=a,$("#formActLocal").show(),$("#formElimLocal").hide(),$("#formModLocal").hide(),$("#formAgregarLocal").hide(),estado_local="Activo",$("#confirmacion_activar").text("¿Desea activar el local "+b+" ?")}function locales_init(){cargaPagina(0),$("#formElimLocal").hide(),$("#formModLocal").hide(),$("#formActLocal").hide(),$("#formAgregarLocal").show()}function limpiarCampos(){$("#nombre").val(""),$("#capacidad").val(""),$("label").removeClass("active"),$("input").removeClass("valid"),$("input").removeClass("invalid"),$("#mod_nombre").val(""),$("#mod_capacidad").val("")}var url_listar_locales="/privado/php/locales/localesListar.php",url_locales="/privado/php/locales/locales.php",url_eliminar_locales="/privado/php/locales/eliminarLocales.php",pk_local,estado_local="Inactivo",ver_estado_local="Activo";$(document).ready(function(){paginador=$(".pagination");var a=5,b=3;init_paginator(paginador,a,b),set_callback(get_data_callback_locales),locales_init(),$("select").material_select()}),$("#ver_locales_activos").click(function(a){"Activo"!=ver_estado_local&&(ver_estado_local="Activo",set_callback(get_data_callback_locales),locales_init())}),$("#ver_locales_inactivos").click(function(a){"Inactivo"!=ver_estado_local&&(ver_estado_local="Inactivo",set_callback(get_data_callback_locales),locales_init())}),$("#buscar_local").keyup(function(){locales_init()}),$("#agregar_local").click(function(a){$.post(url_locales,{nombre:$("#nombre").val(),capacidad:$("#capacidad").val(),idTipoLocal:$("#selectTipoLocal").val(),token:$("#dpToken").val()},function(a){switch(a){case"agregado":swal("Éxito","Local agregado.","success"),locales_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"error");break;default:swal("Error",a,"error")}})}),$("#modificar_local").click(function(a){$.post(url_locales,{id:pk_local,nombre:$("#mod_nombre").val(),capacidad:$("#mod_capacidad").val(),idTipoLocal:$("#selectTipoLocalMod").val(),token:$("#dpToken").val()},function(a){switch(a){case"modificado":swal("Éxito","Local modificado.","success"),locales_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"info");break;case"existente":swal("Error","Local existente.","error");break;default:swal("Error",a,"error")}})}),$("#eliminar_local").click(function(a){$.post(url_eliminar_locales,{id:pk_local,estado:estado_local,token:$("#dpToken").val()},function(a){""!=a&&(locales_init(),swal("",a,"info"))})}),$("#activar_local").click(function(a){$.post(url_eliminar_locales,{id:pk_local,estado:estado_local,token:$("#dpToken").val()},function(a){""!=a&&(locales_init(),swal("",a,"info"))})}),$("#cancelar_mod").click(function(a){limpiarCampos(),$("#formAgregarLocal").show(),$("#formModLocal").hide(),$("#formElimLocal").hide(),$("#formActLocal").hide()}),$("#cancelar_eliminar").click(function(a){limpiarCampos(),$("#formAgregarLocal").show(),$("#formModLocal").hide(),$("#formElimLocal").hide(),$("#formActLocal").hide()}),$("#cancelar_activar").click(function(a){limpiarCampos(),$("#formAgregarLocal").show(),$("#formModLocal").hide(),$("#formElimLocal").hide(),$("#formActLocal").hide()});