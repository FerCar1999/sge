function asuetos_init(){cargaPagina(0),$("#formAgregar").show(),$("#formMod").hide(),$("#formElim").hide(),$("#formAct").hide()}function get_data_callback_asuetos(){$.ajax({data:{limit:itemsPorPagina,offset:desde,busqueda:$.trim($("input#buscar_asueto").val()),estado:ver_estado_asueto},type:"POST",url:url_listar_asuetos}).done(function(a,b,c){var d=a.lista;$(".table").html(""),0==pagina&&creaPaginador(a.cantidad),$.each(d,function(a,b){"Activo"==ver_estado_asueto?$('<tr id="+elem.id+"><td>'+b.nombre+'</td><td><a onclick="ver_asueto('+b.id+",'"+b.nombre+"','"+b.inicio+"','"+b.fin+'\')" class="btn-floating green" ><i  class="material-icons">edit</i></a> <a onclick="eliminarasueto('+b.id+",'"+b.nombre+'\')" class="btn-floating green"><i class="material-icons">delete</i></a></td></tr>').appendTo($(".table")):$('<tr id="+elem.id+"><td>'+b.nombre+'</td><td><a onclick="activar_asueto('+b.id+",'"+b.nombre+'\')" class="btn-floating green" ><i  class="material-icons">autorenew</i></a></td></tr>').appendTo($(".table"))})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function eliminarasueto(a,b){pk_asueto=a,$("#formAgregar").hide(),$("#formMod").hide(),$("#formElim").show(),$("#confirmacion").text("¿Desea desactivar el asueto "+b+"?"),estado_asueto="Inactivo"}function activar_asueto(a,b){pk_asueto=a,estado_asueto="Activo",$("#formAct").show(),$("#formElim").hide(),$("#formMod").hide(),$("#formAgregar").hide(),$("#confirmacion_activar").text("¿Desea activar el asueto "+b+"?")}function ver_asueto(a,b,c,d){pk_asueto=a,$("#mod_nombre").val(b),$("#mod_date_inicio").val(c),$("#mod_date_fin").val(d),$("label").addClass("active"),$("#formAgregar").hide(),$("#formMod").show(),$("#formElim").hide(),$("#formAct").hide()}var url_listar_asuetos="/privado/php/asuetos/asuetos_listar.php",url_guardar_asueto="/privado/php/asuetos/guardar_asueto.php",url_eliminar_asueto="/privado/php/asuetos/eliminar_asueto.php",pk_asueto,estado_asueto="Inactivo",ver_estado_asueto="Activo";$(document).ready(function(){$(".datepicker").pickadate({monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sáb"],today:"Hoy",clear:"Limpiar",close:"Cerrar",labelMonthNext:"Adelante",labelMonthPrev:"Atras",labelMonthSelect:"Seleccione un mes",labelYearSelect:"Seleccione un año",format:"dd !de mmmm !de yyyy",formatSubmit:"yyyy/mm/dd",selectMonths:!0,selectYears:100,closeOnSelect:!0}),paginador=$(".pagination");var a=3,b=3;init_paginator(paginador,a,b),set_callback(get_data_callback_asuetos),asuetos_init()}),$("#agregar").click(function(a){$.post(url_guardar_asueto,{nombre:$("#nombre").val(),token:$("#dpToken").val(),inicio:$("#date_inicio").pickadate("picker").get("select","yyyy/mm/dd"),fin:$("#date_fin").pickadate("picker").get("select","yyyy/mm/dd")},function(a){swal(a)})}),$("#modificar").click(function(a){$.post(url_guardar_asueto,{id:pk_asueto,nombre:$("#mod_nombre").val(),token:$("#dpToken").val(),inicio:$("#mod_date_inicio").pickadate("picker").get("select","yyyy/mm/dd"),fin:$("#mod_date_fin").pickadate("picker").get("select","yyyy/mm/dd")},function(a){swal(a)})}),$("#ver_asuetos_activos").click(function(a){"Activo"!=ver_estado_asueto&&(ver_estado_asueto="Activo",set_callback(get_data_callback_asuetos),asuetos_init())}),$("#ver_asuetos_inactivos").click(function(a){"Inactivo"!=ver_estado_asueto&&(ver_estado_asueto="Inactivo",set_callback(get_data_callback_asuetos),asuetos_init())}),$("#buscar_asueto").keyup(function(){asuetos_init()}),$("#eliminar").click(function(a){$.post(url_eliminar_asueto,{id:pk_asueto,estado:estado_asueto,token:$("#dpToken").val()},function(a){asuetos_init(),""!=a&&swal("Éxito",a,"info")})}),$("#activar").click(function(a){$.post(url_eliminar_asueto,{id:pk_asueto,estado:estado_asueto,token:$("#dpToken").val()},function(a){asuetos_init(),""!=a&&swal("Éxito",a,"info")})});