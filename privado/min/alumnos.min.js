function get_data_callback_alumnos(){$.ajax({data:{limit:itemsPorPagina,offset:desde,busqueda:$.trim($("input#buscar_alumno").val()),estado:ver_estado_alumno},type:"POST",url:url_listar_alumnos}).done(function(a,b,c){var d=a.lista;$(".table").html(""),0==pagina&&creaPaginador(a.cantidad),$.each(d,function(a,b){"Activo"==ver_estado_alumno?$('<tr id="+elem.id+"><td>'+b.codigo+"</td><td>"+b.nombres+"</td><td>"+b.apellidos+"</td><td>"+b.correo+'</td><td><a onclick="ver_alumno('+b.id+",'"+b.nombres+"','"+b.apellidos+"','"+b.codigo+"','"+b.correo+"','"+b.foto+"',"+b.idEspecialiad+","+b.idGrado+')" class="btn-floating green" ><i  class="material-icons">edit</i></a> <a onclick="eliminar_alumno('+b.id+",'"+b.nombres+"','"+b.apellidos+'\')" class="btn-floating green"><i class="material-icons">delete</i></a></td></tr>').appendTo($(".table")):$('<tr id="+elem.id+"><td>'+b.codigo+"</td><td>"+b.nombres+"</td><td>"+b.apellidos+"</td><td>"+b.correo+'</td><td><a onclick="activar_alumno('+b.id+",'"+b.nombres+"','"+b.apellidos+'\')" class="btn-floating green" ><i  class="material-icons">autorenew</i></a></td></tr>').appendTo($(".table"))})}).fail(function(a,b,c){alert("Error al realizar la petición dame".textError)})}function readURL(a){if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){$("#img_alumno").attr("src",a.target.result),$("#img_alumno_mod").attr("src",a.target.result)},b.readAsDataURL(a.files[0])}}function ver_alumno(a,b,c,d,e,f,g,h){pk_alumno=a,foto_antigua=f,$(".agregar_alumno").hide(),$(".modificar_alumno").show(),$("label").addClass("active"),$("#mod_nombre").val(b),$("#mod_apellido").val(c),$("#mod_correo").val(e),$("#mod_codigo").val(d),$("#selectEspecialiadMod").find('option[value="'+g+'"]').prop("selected",!0),$("#selectEspecialiadMod").material_select(),$("#selectGradoMod").find('option[value="'+h+'"]').prop("selected",!0),$("#selectGradoMod").material_select(),$("#img_alumno_mod").attr("src",f)}function eliminar_alumno(a,b,c){pk_alumno=a,$(".agregar_alumno").hide(),$(".modificar_alumno").hide(),$(".eliminar_alumno").show(),$("#confirmacion").text("¿Desea desactivar a "+b+" "+c+"?"),estado_alumno="Inactivo"}function activar_alumno(a,b,c){pk_alumno=a,$(".activar_alumno").show(),$(".eliminar_alumno").hide(),$(".modificar_alumno").hide(),$(".agregar_alumno").hide(),estado_alumno="Activo",$("#confirmacion_activar").text("¿Desea activar a "+b+" "+c+"?")}function alumno_init(){cargaPagina(0),$(".eliminar_alumno").hide(),$(".modificar_alumno").hide(),$(".activar_alumno").hide(),$(".agregar_alumno").show()}function limpiarCampos(){$("#nombre").val(""),$("#apellido").val(""),$("#correo").val(""),$("#codigo").val(""),$("#clave").val(""),$("#buscar_alumno").val(""),$("label").removeClass("active"),$("input").removeClass("valid"),$("input").removeClass("invalid"),$("#img_alumno").attr("src","/media/img/user_default.png"),$("#mod_nombre").val(""),$("#mod_apellido").val(""),$("#mod_correo").val(""),$("#mod_codigo").val(""),$("#img_alumno_mod").attr("src","/media/img/user_default.png")}var url_listar_alumnos="/privado/php/alumnos/alumnosListar.php",url_alumnos="/privado/php/alumnos/alumnos.php",url_eliminar_alumnos="/privado/php/alumnos/eliminarAlumno.php",pk_alumno,estado_alumno="Inactivo",foto_antigua,ver_estado_alumno="Activo";$(document).ready(function(){paginador=$(".pagination");var a=10,b=3;init_paginator(paginador,a,b),set_callback(get_data_callback_alumnos),alumno_init(),$("select").material_select()}),$("#buscar_alumno").keyup(function(){alumno_init()}),$("#ver_alumnos_activos").click(function(a){"Activo"!=ver_estado_alumno&&(ver_estado_alumno="Activo",set_callback(get_data_callback_alumnos),alumno_init())}),$("#ver_alumnos_inactivos").click(function(a){"Inactivo"!=ver_estado_alumno&&(ver_estado_alumno="Inactivo",set_callback(get_data_callback_alumnos),alumno_init())}),$(document).ready(function(){$("#formAlumnos").on("submit",function(a){a.preventDefault();var b=new FormData(this);b.append("nombre",$("#nombre").val()),b.append("apellido",$("#apellido").val()),b.append("correo",$("#correo").val()),b.append("codigo",$("#codigo").val()),b.append("clave",$("#clave").val()),b.append("idEspecialidad",$("#selectEspecialiad").val()),b.append("idGrado",$("#selectGrado").val()),b.append("token",$("#dpToken").val()),$.ajax({url:url_alumnos,type:"POST",data:b,contentType:!1,processData:!1,success:function(a){switch(a){case"agregado":swal("Éxito","Estudiante agregado.","success"),alumno_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"info");break;default:swal("Error",a,"error")}}})}),$("#formAlumnoMod").on("submit",function(a){a.preventDefault();var b=new FormData(this);b.append("id",pk_alumno),b.append("nombre",$("#mod_nombre").val()),b.append("apellido",$("#mod_apellido").val()),b.append("codigo",$("#mod_codigo").val()),b.append("correo",$("#mod_correo").val()),b.append("url_foto",foto_antigua),b.append("idEspecialidad",$("#selectEspecialiadMod").val()),b.append("idGrado",$("#selectGradoMod").val()),b.append("token",$("#dpToken").val()),$.ajax({url:url_alumnos,type:"POST",data:b,contentType:!1,processData:!1,success:function(a){swal(a),alumno_init(),limpiarCampos()}})})}),$("#agregar_alumno").click(function(a){$("#formAlumnos").submit()}),$("#modificar_alumno").click(function(a){$("#formAlumnoMod").submit()}),$("#eliminar_alumno").click(function(a){$.post(url_eliminar_alumnos,{id:pk_alumno,estado:estado_alumno,token:$("#dpToken").val()},function(a){alumno_init(),swal(a)})}),$("#activar_alumno").click(function(a){$.post(url_eliminar_alumnos,{id:pk_alumno,estado:estado_alumno,token:$("#dpToken").val()},function(a){alumno_init(),swal(a)})}),$("#cancelar_mod").click(function(a){$(".agregar_alumno").show(),limpiarCampos(),$(".modificar_alumno").hide(),$(".eliminar_alumno").hide()}),$("#cancelar_eliminar").click(function(a){$(".agregar_alumno").show(),$(".modificar_alumno").hide(),$(".eliminar_alumno").hide()}),$("#cancelar_activar").click(function(a){$(".agregar_alumno").show(),$(".modificar_alumno").hide(),$(".eliminar_alumno").hide()}),$("#fotoAlumno").change(function(){readURL(this)}),$("#fotoAlumnoMod").change(function(){readURL(this)});