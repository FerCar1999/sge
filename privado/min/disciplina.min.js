function mostrarModalAula(a,b,c,d){$(".modal").modal(),$("select").material_select(),$("#modal1").modal("open"),$("#codigo").text(a),$("#nombre").text(b),$("#foto").attr("src",c),$("#codigoOb").text(a),$("#nombreOb").text(b),$("#fotoOb").attr("src",c),codigo_alumno=a,id_horario=d,codigo_aula=!0}function mostrarModalAulaHistorial(a,b,c,d){$(".modal").modal(),$("#modal2").modal("open"),$("#codigoHistorial").text(a),$("#nombreHistorial").text(b),codigo_alumno=a,$("#fotoHistorial").attr("src",c),cargar_historial_codigo(a,d)}function cargar_historial_codigo(a,b){$.ajax({data:{id:a},type:"POST",url:url_cargar_historial}).done(function(a,b,c){var d=a.lista;$(".licodigos").html(""),$.each(d,function(a,b){$("<tr><td>"+b.tipo+"</td><td>"+b.codigo+"</td><td>"+b.fecha+'</td><td><a href="#!" class="btn-floating tooltipped" data-position="left" data-delay="50" data-tooltip="Quitar código" onclick="eliminar_codigo('+b.id+')"><i class="material-icons">highlight_off</i></a> <a href="#!" class="btn-floating tooltipped" data-position="left" data-delay="50" data-tooltip="Ver observación" onclick="swal(\'Observación\',\''+b.observacion+'\')"><i class="material-icons">list</i></a></td><tr>').appendTo($(".licodigos"))})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function eliminar_codigo(a){$.post(url_quitar_codigo,{id:10,pk_disciplina:a,token:$("#dpToken").val()},function(a){swal(a),getCodigosAlumnoGuia(codigo_alumno)})}function asignar_observacion(){$.post(url_asignar_observacion,{pk_codigo:codigo_alumno,token:$("#dpToken").val(),observacion:$("#observacion_text").val()},function(a){swal(a),$("#observacion_text").val("")})}function asignar_codigo(){codigo_aula?$.post(url_asignar_codigo,{pk_alumno:codigo_alumno,pk_horario:id_horario,pk_codigo:$("#selectCodigo").val(),token:$("#dpToken").val(),pk_observacion:$("#observacion_codigo").val(),token:$("#dpToken").val()},function(a){swal(a),$("#observacion_codigo").val("")}):$.post(url_asignar_codigo,{pk_alumno:codigo_alumno,pk_codigo:$("#selectCodigo").val(),pk_observacion:$("#observacion_codigo").val(),token:$("#dpToken").val()},function(a){swal(a)})}function cargar_codigos(){$.ajax({data:{id:pk_tipo_codigo,token:$("#dpToken").val()},type:"POST",url:url_cargar_codigos}).done(function(a,b,c){var d=a.lista;$("#selectCodigo").html(""),$.each(d,function(a,b){$("#selectCodigo").append($("<option>",{value:b.id,text:b.nombre})),$("select").material_select()})}).fail(function(a,b,c){alert("Error al realizar la peticion dame".textError)})}function obtenerAlumnos(){return $.ajaxSetup({async:!1}),$.ajax({type:"POST",url:url_listar_alumnos_guia,data:{},dataType:"json",success:function(valores){var resp=eval(valores);return $.each(resp,function(a,b){var c=b.alumno,d=b.foto;autocompleteAlumnos[c]=d}),!1}}),!1}function getCodigosAlumnoGuia(a){codigosExaulaInit(),$.ajaxSetup({async:!1}),$.ajax({data:{id:a},type:"POST",url:url_cargar_historial}).done(function(b,c,d){var e=b.lista,f="";$(".table").html(""),$.each(e,function(b,c){codigo_alumno=a,f+="<tr><td>"+c.tipo+"</td><td>"+c.codigo+"</td><td>"+c.fecha+"</td><td>"+c.nombre+'</td><td><a href="#!" class="btn-floating tooltipped" data-position="left" data-delay="50" data-tooltip="Quitar código" onclick="eliminar_codigo('+c.id+')"><i class="material-icons">highlight_off</i></a> <a href="#!" class="btn-floating tooltipped" data-position="left" data-delay="50" data-tooltip="Ver observación" onclick="swal(\'Observación\',\''+c.observacion+'\')"><i class="material-icons">list</i></a></td><tr>'}),""!=f&&($("ul.collection").append('<li class="collection-header center-align"><h5>Historial de códigos</h5'),$(".table").append(f)),""!=f?($("#noHayCodigos").hide(),$("#asignarExaulaDiv").hide(),$("#asignarObservacionDiv").hide(),$("#infoCodigos").show(),$("#fotoExaula").attr("src",autocompleteAlumnos[$("#alumno").val()]),$("#nombreExaula").text($("#alumno").val().substring(9,$("#alumno").val().length)),$("#carnetExaula").text($("#alumno").val().substring(0,8))):($("#infoCodigos").hide(),$("#asignarExaulaDiv").hide(),$("#asignarObservacionDiv").hide(),$("#noHayCodigos").show(),$("#noHayCodigos").append("<br><h5>No se han asignado códigos al estudiante</h5>"))}).fail(function(a,b,c){$("#infoCodigos").hide(),$("#asignarExaulaDiv").hide(),$("#noHayCodigos").show(),$("#noHayCodigos").html(""),$("#noHayCodigos").append("<br><h5>No se han asignado códigos al estudiante</h5>")})}function codigosExaulaInit(){$("#infoCodigos").hide(),$("#noHayCodigos").hide(),$("#asignarExaulaDiv").hide(),$("#asignarObservacionDiv").hide(),$("#buttonObservacion").hide(),$("#fotoExaula").attr("src",""),$("#nombreExaula").text(""),$("#carnetExaula").text("")}var url_cargar_codigos="/privado/php/disciplina/codigos_listar.php",url_asignar_codigo="/privado/php/disciplina/asignar_codigos.php",url_asignar_observacion="/privado/php/disciplina/asignar_observacion.php",url_quitar_codigo="/privado/php/disciplina/quitar_codigo.php",url_cargar_historial="/privado/php/disciplina/historial_codigos_listar.php",url_listar_alumnos_guia="/privado/php/disciplina/listarAlumnosGuia.php",url_listar_codigos_alumno_guia="/privado/php/disciplina/listarCodigosAlumnoGuia.php",url_reporte="/privado/php/reportes/conducta/conducta.php",autocompleteAlumnos={},pk_alumno,codigo_alumno=0,id_horario=0,codigo_aula=!1;$(document).ready(function(){obtenerAlumnos(),codigosExaulaInit(),$("ul.tabs").tabs(),$("select").material_select(),$("input.autocomplete").autocomplete({data:autocompleteAlumnos})}),$("#verCodigosAlumno").click(function(){codigosExaulaInit(),codigo_alumno=$("#alumno").val().substring(0,8),""!=codigo_alumno&&getCodigosAlumnoGuia(codigo_alumno)}),$("#loadCodigos").click(function(){codigosExaulaInit(),codigo_alumno=$("#alumno").val().substring(0,8),""!=codigo_alumno&&($("#asignarExaulaDiv").show(),$("#foto").attr("src",autocompleteAlumnos[$("#alumno").val()]),$("#nombre").text($("#alumno").val().substring(9,$("#alumno").val().length)),$("#codigo").text($("#alumno").val().substring(0,8)))}),$("#reporteAlumno").click(function(){codigo_alumno=$("#alumno").val().substring(0,8),""!=codigo_alumno?($("#alumnoCod").val(codigo_alumno),console.log($("#alumnoCod").val()),reporteAlumnoForm.submit()):Materialize.toast("Seleccione un estudiante para ver su reporte.",3e3,"rounded")}),$("#loadObservacion").click(function(){codigosExaulaInit(),codigo_alumno=$("#alumno").val().substring(0,8),""!=codigo_alumno&&($("#asignarObservacionDiv").show(),$("#fotoOb").attr("src",autocompleteAlumnos[$("#alumno").val()]),$("#nombreOb").text($("#alumno").val().substring(9,$("#alumno").val().length)),$("#codigoOb").text($("#alumno").val().substring(0,8)))}),$(".cancelarButton").click(function(){codigosExaulaInit()}),$("#asignarCodigo").click(function(){asignar_codigo(),$("#observacion_codigo").val(""),$("#selectCodigo").find('option[value=""]').prop("selected",!0),$("#selectCodigo").material_select(),$("#selectTipoCodigo").find('option[value=""]').prop("selected",!0),$("#selectTipoCodigo").material_select()}),$("#asignarObservacion").click(function(){asignar_observacion(),$("#observacion_text").val("")}),$("#observacionActive").click(function(){$("#buttonCodigo").hide(),$("#buttonObservacion").show()}),$("#codigoActive").click(function(){$("#buttonCodigo").show(),$("#buttonObservacion").hide()}),$("#selectTipoCodigo").change(function(){pk_tipo_codigo=$("#selectTipoCodigo").val(),cargar_codigos()});