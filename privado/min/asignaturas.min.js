function get_data_callback_asignaturas(){$.ajax({data:{limit:itemsPorPagina,busqueda:$.trim($("input#buscar_asignatura").val()),offset:desde,estado:ver_estado_asignatura},type:"POST",url:url_listar_asignatura}).done(function(a,b,c){var d=a.lista;$(".table").html(""),0==pagina&&creaPaginador(a.cantidad),$.each(d,function(a,b){"Activo"==ver_estado_asignatura?$('<tr id="+elem.id+"><td>'+b.nombre+"</td><td>"+b.ngrado+"</td><td>"+b.codigo+'</td><td><a onclick="ver_asignatura('+b.id+",'"+b.nombre+"','"+b.codigo+"',"+b.tipoAsignatura+","+b.grado+",'"+b.ngrado+'\')" class="btn-floating green" ><i  class="material-icons">edit</i></a> <a onclick="eliminarAsignatura('+b.id+",'"+b.nombre+"','"+b.ngrado+'\')" class="btn-floating green"><i class="material-icons">delete</i></a></td></tr>').appendTo($(".table")):$('<tr id="+elem.id+"><td>'+b.nombre+"</td><td>"+b.ngrado+"</td><td>"+b.codigo+'</td><td><a onclick="activar_asignatura('+b.id+",'"+b.nombre+"','"+b.ngrado+'\')" class="btn-floating green" ><i  class="material-icons">autorenew</i></a></td></tr>').appendTo($(".table"))})}).fail(function(a,b,c){alert("Error al realizar la petición dame".textError)})}function ver_asignatura(a,b,c,d,e){pk_asignatura=a,nombre_asignatura=b,$(".formAsignatura").hide(),$(".formAsignaturaMod").show(),$("label").addClass("active"),$("label#labelGrado").removeClass("active"),$("label#labelTipo").removeClass("active"),$("#mod_nombre").val(b),$("#mod_codigoAsignatura").val(c),$("#mod_selectTipoAsignatura").find('option[value="'+d+'"]').prop("selected",!0),$("#mod_selectTipoAsignatura").material_select(),$("#mod_selectGrado").find('option[value="'+e+'"]').prop("selected",!0),$("#mod_selectGrado").material_select(),$("select").material_select()}function eliminarAsignatura(a,b,c){pk_asignatura=a,nombre_asignatura=b,$(".formAsignatura").hide(),$(".formAsignaturaMod").hide(),$(".formAsignaturaElim").show(),$("#confirmacion").text("¿Desea desactivar la asignatura "+b+" de "+c+"?"),estado_asignatura="Inactivo"}function activar_asignatura(a,b,c){pk_asignatura=a,nombre_asignatura=b,$(".formAsignaturaAct").show(),$(".formAsignaturaElim").hide(),$(".formAsignaturaMod").hide(),$(".formAsignatura").hide(),estado_asignatura="Activo",$("#confirmacion_activar").text("¿Desea activar la asignatura "+b+" de "+c+"?")}function asignatura_init(){cargaPagina(0),$(".formAsignaturaElim").hide(),$(".formAsignaturaMod").hide(),$(".formAsignaturaAct").hide(),$(".formAsignatura").show()}function limpiarCampos(){$("#nombre").val(""),$("#codigoAsignatura").val(""),$("label").removeClass("active"),$("input").removeClass("valid"),$("input").removeClass("invalid"),$("#mod_nombre").val(""),$("#mod_codigoAsignatura").val("")}var url_listar_asignatura="/privado/php/asignaturas/asignaturasListar.php",url_asignatura="/privado/php/asignaturas/asignaturas.php",url_eliminar_asignatura="/privado/php/asignaturas/asignaturasEliminar.php",pk_asignatura,estado_asignatura="Inactivo",ver_estado_asignatura="Activo",nombre_asignatura="";$(document).ready(function(){paginador=$(".pagination");var a=10,b=3;init_paginator(paginador,a,b),set_callback(get_data_callback_asignaturas),asignatura_init(),$("select").material_select()}),$("#ver_asignaturas_activas").click(function(a){"Activo"!=ver_estado_asignatura&&(ver_estado_asignatura="Activo",set_callback(get_data_callback_asignaturas),asignatura_init())}),$("#ver_asignaturas_inactivas").click(function(a){"Inactivo"!=ver_estado_asignatura&&(ver_estado_asignatura="Inactivo",set_callback(get_data_callback_asignaturas),asignatura_init())}),$("#buscar_asignatura").keyup(function(){asignatura_init()}),$("#agregar_asignatura").click(function(a){$.ajaxSetup({async:!1}),$.post(url_asignatura,{codigo:$("#codigoAsignatura").val(),nombre:$("#nombre").val(),tipoAsignatura:$("#selectTipoAsignatura").val(),id_grado:$("#selectGrado").val(),token:$("#dpToken").val(),estado:"Activo"},function(a){switch(console.log(a),a){case"agregado":swal("Éxito","Asignatura agregada.","success"),asignatura_init(),limpiarCampos();break;case"camposFalta":swal("Error",a,"info");break;default:swal("Error",a,"error")}})}),$("#modificar_asignatura").click(function(a){$.ajaxSetup({async:!1});var b=!1,c=!1,d=!1,e="";$.post(url_asignatura,{id:pk_asignatura,codigo:$("#mod_codigoAsignatura").val(),nombre:$("#mod_nombre").val(),token:$("#dpToken").val(),tipoAsignatura:$("#mod_selectTipoAsignatura").val(),id_grado:$("#mod_selectGrado").val(),estado:"Activo"},function(a){switch(a){case"modificado":b=!0;break;case"camposFalta":c=!0,e=a;break;default:d=!0,e=a}}),b&&(swal("Éxito","Asignatura modificada.","success"),asignatura_init(),limpiarCampos()),c&&swal("Error",e,"info"),d&&swal("Error",e,"error")}),$("#eliminar_asginatura").click(function(a){$.ajaxSetup({async:!1});var b="";$.post(url_eliminar_asignatura,{id:pk_asignatura,estado:estado_asignatura,token:$("#dpToken").val()},function(a){b=a,asignatura_init()}),swal("",b,"info")}),$("#activar_asignatura").click(function(a){$.post(url_eliminar_asignatura,{id:pk_asignatura,estado:estado_asignatura},function(a){asignatura_init(),swal("",a,"info")})}),$("#cancelar_mod").click(function(a){limpiarCampos(),$(".formAsignatura").show(),$(".formAsignaturaMod").hide(),$(".formAsignaturaElim").hide(),$(".formAsignaturaAct").hide()}),$("#cancelar_eliminar").click(function(a){limpiarCampos(),$(".formAsignatura").show(),$(".formAsignaturaMod").hide(),$(".formAsignaturaElim").hide(),$(".formAsignaturaAct").hide()}),$("#cancelar_activar").click(function(a){limpiarCampos(),$(".formAsignatura").show(),$(".formAsignaturaMod").hide(),$(".formAsignaturaElim").hide(),$(".formAsignaturaAct").hide()});